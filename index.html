<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>शिकायत फॉर्म</title>
</head>
<body>
    <div class="container">
        <h1>शिकायत फॉर्म</h1>
        <form id="complaintForm" name="complaintForm" method="POST" enctype="multipart/form-data" data-netlify="true" onsubmit="return validateForm(event)">
            <label for="name">पूरा नाम:</label>
            <input type="text" id="name" name="name" required placeholder="अपना नाम दर्ज करें">
            <label for="fatherName">पिता का नाम:</label>
            <input type="text" id="fatherName" name="fatherName" required placeholder="पिता का नाम दर्ज करें">
            
            <label for="dob">जन्मतिथि:</label>
            <input type="date" id="dob" name="dob" required>
            
            <label for="village">गांव/शहर का नाम:</label>
            <input type="text" id="village" name="village" required placeholder="गांव या शहर का नाम दर्ज करें">
            
            <label for="contact">संपर्क नंबर:</label>
            <input type="tel" id="contact" name="contact" required pattern="\d{10}" placeholder="10 डिजिट का मोबाइल नंबर दर्ज करें">
            
            <label for="complaintType">शिकायत का प्रकार:</label>
            <select id="complaintType" name="complaintType" required>
                <option value="" disabled selected>चुनें...</option>
                <option value="electricity">बिजली समस्या</option>
                <option value="water">पानी की समस्या</option>
                <option value="road">सड़क की समस्या</option>
                <option value="health">स्वास्थ्य समस्या</option>
                <option value="police">पुलिस/कानून व्यवस्था</option>
                <option value="other">अन्य</option>
            </select>
            
            <label for="description">शिकायत का विवरण:</label>
            <textarea id="description" name="description" rows="5" required placeholder="अपनी समस्या का विवरण लिखें (300 शब्दों तक)" maxlength="1500"></textarea>
            
            <!-- File upload field -->
            <label for="fileUpload">फाइल अपलोड करें (JPG, PDF):</label>
            <input type="file" id="fileUpload" name="fileUpload" accept=".jpg, .pdf" required>
            
            <!-- Date field -->
            <label for="date">तारीख:</label>
            <input type="date" id="date" name="date" required max="" readonly>
            
            <button type="submit">सबमिट करें</button>
        </form>
    </div>

    <script>
        function validateForm(event) {
            // फॉर्म का डिफॉल्ट सबमिशन रोकें
            event.preventDefault();

            var form = document.getElementById('complaintForm');
            var contact = document.getElementById('contact').value;
            var description = document.getElementById('description').value;
            var fileInput = document.getElementById('fileUpload');
            var file = fileInput.files[0];
            var currentDate = new Date().toISOString().split('T')[0];
            var dateField = document.getElementById('date');

            // 1. मोबाइल नंबर वैलिडेशन (10 डिजिट)
            if (!/^\d{10}$/.test(contact)) {
                alert("कृपया 10 डिजिट का मोबाइल नंबर दर्ज करें");
                return false;
            }

            // 2. डिस्क्रिप्शन में 300 शब्द
            var wordCount = description.trim().split(/\s+/).length;
            if (wordCount > 300) {
                alert("कृपया डिस्क्रिप्शन 300 शब्दों से अधिक ना हो");
                return false;
            }

            // 3. फाइल का साइज 10KB से 2MB के बीच होना चाहिए
            if (file && (file.size < 10240 || file.size > 2097152)) {
                alert("फाइल का आकार 10KB से 2MB के बीच होना चाहिए");
                return false;
            }

            // 4. डेट चेक करें (केवल आज की तारीख)
            if (dateField.value !== currentDate) {
                alert("तारीख केवल आज की हो सकती है");
                return false;
            }

            // फॉर्म को सबमिट करें
            form.submit();
        }

        // तारीख का मान सेट करें
        document.getElementById('date').setAttribute('max', new Date().toISOString().split('T')[0]);
    </script>
</body>
</html>
